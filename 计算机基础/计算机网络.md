# 计算机网络

## 概述

### 计算机网络在信息时代中的作用

1. 21世纪的重要特征 - 数字化、网络化、信息化，是一个以网络为核心的信息时代
2. 三网 - 电信网络、有线电视网络、计算机网络 （目前已经基本融合到现在计算机技术中）
3. 计算机网络的功能 - **连通性**、**资源共享**

### 因特网

#### 1. 什么是网络?

由若干**结点**和连接结点的**链路**组成。

> 结点：计算机、集线器、交换机、路由器等。

#### 2. 互联网 internet

网络和网络可以通过**路由器**互联，构成覆盖范围更大的网络，组成互联网。（网络的网络）

#### 3. 因特网 Internet

**因特网**是全球最大的互联网，连接到因特网的计算机称为**主机**

网络把很多计算机连接在一起，因特网是把很多网络连接在一起。

#### 4. 互联网和因特网

**互联网**是一个通用名词，泛指由多个计算机网络互连而成的网络。互联网的通信协议是任意的。

**因特网**是一个专用名词，指的是全球最大的、开放的、有众多网络互连而成的计算机网络。因特网的通信协议是 **TCP/IP**。（TCP/IP协议的前身是美国的 **ARPANET**）

#### 5. 因特网的发展阶段

- 第一阶段：由单个网络 ARPANET 向互联网发展的过程。
- 第二阶段：建成三级结构的因特网。分为主干网、地区网、校园网（或企业网）。美国政府将主干网交给私人公司经营。
- 第三阶段：形成多层次 ISP 结构的因特网。1993年开始，NSFNET （美国科学基金网） 逐渐被商用的因特网主干网替代。出现了**因特网服务提供商 ISP**：例如中国电信、中国联通、中国移动等。

#### 6. ISP

ISP 层次：主干 ISP、地区 ISP、本地 ISP。原理上：本地 ISP -> 路由器 -> 地区 ISP -> 路由器 -> 主干 ISP。
因特网交换点 IXP：允许两个网络直接相连并交换分组，不需要通过第三个网络转发分组。使数据流量分布更合理，减少了分组交换的延时时间，降低了分组转发的费用。 

### 因特网的组成

因特网的拓扑结构非常复杂，从工作方式上看，可划分为两部分：
- 边缘部分 由所有连接在因特网上的主机组成。（面向用户、通信、资源共享）
- 核心部分 由大量网络和连接网络的路由器组成。（为边缘部分提供服务、提供连通和数据交换）

> 拓扑：研究几何图形或空间在连续改变形状后还能保持不变的一些性质的一个学科。它只考虑物体间的位置关系而不考虑它们的形状和大小。

> 网络拓扑结构：指用传输媒体把计算机等各种设备互相连接起来的物理布局，是指互连过程中构成的几何形状，它能表示出网络服务器、工作站的网络配置和互相之间的连接。网络拓扑结构可按形状分类，分别有：星型、环型、总线型、树型、总线/星型和网状型拓扑结构。

#### 边缘部分

- 端系统（end-system）：连接在因特网的所有主机。
- 通信：主机 A 和主机 B 通信实际上是指 A 的程序和 B 的程序通信。

- 通信方式：
    - 客户-服务器 C/S ：
        - 客户是请求方，服务器是提供方。
        - 客户向服务器请求资源。
        - B/S 也是 C/S 的一种特例。
    - 对等连接方式 (Peer-to-Peer) (P2P)：
        - 双方主机都运行 P2P 软件，进行文件共享。
        - 本质还是 C/S 方式，只是 P2P 中每一个主机既是客户又是服务器。

#### 核心部分

- 核心部分主要是向边缘部分的主机提供连通性服务，让每一台主机都能向其他主机通信。
- 核心部分的路由器（router）：是专用的计算机（不是主机），主要实现**分组交换**，任务是接收和转发分组。

> 主机与路由器：  
相同点：都是计算机。  
不同点：主机是为用户进行信息处理（面向用户）、路由器是进行分组交换（面向主机或其他路由器）。

- 路由器工作原理：
    - 接收分组，暂存分组（暂存在内存中，保证较高的交换速率）。
    - 检查首部，查找转发表，根据首部的目的地址，找到合适的端口转发分组给下一个路由器。
    - 可能经过10多个不同的路由器以存储转发的方式，把分组交给最终主机。

- 电路交换：
    - 交换机是传输枢纽。
    - 建立连接（占用通信资源）-> 通话（一直占用通信资源）-> 释放连接（归还通信资源）三个步骤的交换方式称为电路交换。
    - 特点：在通话时间内，通话的用户始终占用资源。
    - 电路交换传送计算机数据效率很低。

- **分组交换**：
    - 路由器是核心枢纽。
    - 分组交换采用**存储转发技术** (什么是存储转发技术？)。
    - 分组交换原理：
        - 发送的整块数据称为一个报文（message）
        - 发送报文之前，把较长的报文划分为更小的**等长数据段**
        - 每个数据段前加上首部（包含了目的地址和源地址等重要控制信息），构成分组（packet） ，又称为包，首部（header）也称包头。
    - 分组是因特网中的数据单元，分组通过首部才能独立选择正确的传输路径。  

- 分组交换的优点：
    - 高效：动态分配传输宽带，对通信链路是逐段占用。
    - 灵活：每个分组独立选择转发路由。
    - 迅速：不需要建立连接。
    - 可靠：保证可靠性的网络协议、分布式多路由传输分组，避免通信中断或者全网瘫痪。

- 分组交换的缺点：
    - 分组转发时需要在路由器暂存，并且需要排队，造成时延。
    - 增加首部的控制信息，增加额外开销。
    - 没有建立连接保证通信资源，无法确定端到端的带宽。

- 报文交换：整个报文先传送到相邻结点，全部存储后查找转发表，转发到下一个结点。